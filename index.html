<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Risk Management</title>

<style>
:root {
    --win-gray:#c0c0c0;--win-dark:#808080;--win-white:#fff;--win-black:#000;
    --win-blue:#000080;--desktop:#008080;
}
*{box-sizing:border-box}
body{
    background:var(--desktop);margin:0;font-family:Segoe UI,Tahoma,sans-serif;
    display:flex;justify-content:center;align-items:center;min-height:100vh;
}
.window-container{
    background:var(--win-gray);width:100%;max-width:480px;
    border:2px solid var(--win-black);box-shadow:4px 4px 12px #0005;
    display:flex;flex-direction:column;
}
.title-bar{
    background:linear-gradient(90deg,var(--win-blue),#1084d0);
    color:#fff;padding:6px 10px;font-weight:bold;
}
.tabs-wrapper{display:flex;padding:6px 6px 0;gap:2px}
.tab-btn{
    position:relative;flex:1;padding:8px;
    border-top:2px solid #fff;border-left:2px solid #fff;
    border-right:2px solid #000;border-bottom:none;
    background:var(--win-gray);cursor:pointer;font-size:12px;
}
.tab-btn.active{font-weight:bold;z-index:5}
.content-area{
    padding:12px;border:2px solid #fff;border-right-color:#000;border-bottom-color:#000;
    margin:6px;display:flex;flex-direction:column;gap:10px;
}
.form-row{display:flex;gap:8px}
.form-col{flex:1}
label{font-size:12px;font-weight:bold}
input,select{
    width:100%;height:32px;font-family:monospace;font-weight:bold;
}
.risk-presets{display:flex;gap:4px;margin-top:4px}
.risk-presets button{
    flex:1;font-size:11px;padding:4px;cursor:pointer;
}
.lcd{
    background:#111;color:#0f0;font-family:monospace;
    padding:10px;border:3px inset #555;
}
.lcd-row{display:flex;justify-content:space-between;font-size:12px}
.lcd-big{font-size:22px;color:#fff;text-align:right;margin:6px 0}
.tp-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.tp-box{border:1px solid #555;padding:4px;font-size:11px;text-align:center}
.tp-box-wide{grid-column:1/-1}
.copy-btn{
    margin-top:6px;padding:6px;font-weight:bold;cursor:pointer;
}
</style>
</head>

<body>
<div class="window-container">
<div class="title-bar">risk_management.exe</div>

<div class="tabs-wrapper">
<button class="tab-btn active" onclick="setMode('forex')" id="tab-forex">FOREX</button>
<button class="tab-btn" onclick="setMode('gold')" id="tab-gold">GOLD</button>
<button class="tab-btn" onclick="setMode('crypto')" id="tab-crypto">CRYPTO</button>
<button class="tab-btn" onclick="setMode('stock')" id="tab-stock">STOCK</button>
</div>

<div class="content-area">

<div class="form-row">
<div class="form-col">
<label>Balance</label>
<input id="balance" type="number" oninput="calculate()">
</div>
<div class="form-col">
<label>Leverage</label>
<input id="leverage" type="number" value="100" oninput="calculate()">
</div>
</div>

<div class="form-row">
<div class="form-col">
<label>Risk</label>
<input id="riskVal" type="number" oninput="calculate()">
<select id="riskType" onchange="calculate()">
<option value="%">%</option>
<option value="$">$</option>
</select>

<!-- RISK PRESET -->
<div class="risk-presets">
<button onclick="setRisk(0.5)">0.5%</button>
<button onclick="setRisk(1)">1%</button>
<button onclick="setRisk(2)">2%</button>
<button onclick="setRisk(3)">3%</button>
</div>
</div>

<div class="form-col">
<label>Max Loss</label>
<input id="maxLoss" readonly>
</div>
</div>

<div class="form-row">
<div class="form-col">
<label>Entry</label>
<input id="entry" type="number" oninput="calculate()">
</div>
<div class="form-col">
<label>Stop Loss</label>
<input id="sl" type="number" oninput="calculate()">
</div>
</div>

<div class="lcd">
<div class="lcd-row"><span>MODE</span><span id="lcd-mode">FOREX</span></div>
<div class="lcd-row"><span>DIRECTION</span><span id="lcd-dir">-</span></div>
<div class="lcd-big" id="lcd-lot">0.00 LOT</div>
<div class="lcd-row"><span>MARGIN</span><span id="lcd-margin">0</span></div>
<div class="lcd-row"><span>RR CUSTOM</span><span id="lcd-rr">-</span></div>

<div class="tp-grid">
<div class="tp-box"><div id="tp1">TP1</div></div>
<div class="tp-box"><div id="tp2">TP2</div></div>
<div class="tp-box"><div id="tp3">TP3</div></div>
<div class="tp-box tp-box-wide">
<input id="customTp" placeholder="Custom TP" oninput="calculate()">
</div>
</div>
</div>

<button class="copy-btn" onclick="copyPlan()">ðŸ“‹ COPY TRADE PLAN</button>

</div>
</div>

<script>
let currentMode="forex";

function setMode(m){
currentMode=m;
document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
document.getElementById("tab-"+m).classList.add("active");
document.getElementById("lcd-mode").innerText=m.toUpperCase();
calculate();
}

function setRisk(v){
document.getElementById("riskType").value="%";
document.getElementById("riskVal").value=v;
calculate();
}

function calculate(){
let bal=+balance.value||0;
let riskVal=+riskValEl.value||0;
let riskType=riskTypeEl.value;
let entry=+entryEl.value||0;
let sl=+slEl.value||0;
let custom=+customTp.value||0;

let riskAmt=riskType==="%"?bal*riskVal/100:riskVal;
maxLoss.value=riskAmt.toFixed(2);

if(!entry||!sl)return;

let diff=Math.abs(entry-sl);
let lot=(riskAmt/(diff*100000))||0;

lcdLot.innerText=lot.toFixed(2)+" LOT";
lcdMargin.innerText=(lot*entry).toFixed(2);

let dir=sl<entry?"BUY ðŸ”¼":"SELL ðŸ”½";
lcdDir.innerText=dir;

if(custom){
let rr=(Math.abs(custom-entry)/diff).toFixed(2);
lcdRR.innerText="1 : "+rr;
}else lcdRR.innerText="-";
}

function copyPlan(){
let text=
`MODE: ${currentMode.toUpperCase()}
Balance: ${balance.value}
Risk: ${riskVal.value}${riskType.value}
Entry: ${entry.value}
SL: ${sl.value}
Lot: ${lcdLot.innerText}
Direction: ${lcdDir.innerText}
RR: ${lcdRR.innerText}`;
navigator.clipboard.writeText(text);
alert("Trade plan copied!");
}

const balance=document.getElementById("balance");
const leverage=document.getElementById("leverage");
const riskValEl=document.getElementById("riskVal");
const riskTypeEl=document.getElementById("riskType");
const entryEl=document.getElementById("entry");
const slEl=document.getElementById("sl");
const customTp=document.getElementById("customTp");

const lcdLot=document.getElementById("lcd-lot");
const lcdMargin=document.getElementById("lcd-margin");
const lcdDir=document.getElementById("lcd-dir");
const lcdRR=document.getElementById("lcd-rr");

setMode("forex");
</script>
</body>
</html>
